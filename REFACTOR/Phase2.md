# ğŸš€ ScrollScribe Phase 2: CLI & UI Polish

## ğŸ¯ Objective

Elevate ScrollScribeâ€™s user experience by introducing an interactive configuration wizard, modernizing the CLI, and delivering a robust, visually appealing progress and status UI. This phase focuses on polish, usability, and maintainabilityâ€”making ScrollScribe delightful for both new and advanced users.

---

## ğŸ“š Required Reading (DO THIS FIRST!)

Before starting, the developer MUST read these files and resources:

### 1. Current Implementation Files

- `app/cli.py` â€” Main CLI entry point and subcommands
- `app/config.py` â€” Config file logic (to be expanded)
- `app/processing.py` â€” Core processing logic
- `app/discovery.py` â€” URL discovery logic
- `app/utils/` â€” Retry, exceptions, and (if kept) logging/progress utils
- `scribe_config.json` or `scribe.toml` â€” Example config file (to be generated by wizard)
- `archive/scrollscribe.py` â€” For legacy reference

### 2. Modern crawl4ai Documentation

**Use the Context7 MCP tool to read current crawl4ai docs:**

```bash
# Use: context7-mcp:resolve-library-id then context7-mcp:get-library-docs
# Focus on: session management, arun_many, MemoryAdaptiveDispatcher, BrowserConfig, config patterns
```

### 4. Questionary & Commitizen

- [Questionary Docs](https://github.com/tmbo/questionary) â€” For interactive CLI prompts
- [Commitizen](https://commitizen-tools.github.io/commitizen/) â€” For possible inspiration on CLI UX and config flows

### 5. Context7 MCP

- Use for up-to-date crawl4ai documentation and best practices

---

## ğŸ—ï¸ Target Architecture (MINIMAL)

```
ScrollScribe/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __main__.py              # Package entry point
â”‚   â”œâ”€â”€ cli.py                   # CLI with subcommands and rich/typer integration
â”‚   â”œâ”€â”€ config.py                # Config file logic and factories
â”‚   â”œâ”€â”€ processing.py            # Core processing logic (markdown, filtering, batch)
â”‚   â”œâ”€â”€ discovery.py             # URL discovery logic
â”‚   â””â”€â”€ utils/                   # Retry, exceptions, logging, progress
â”‚       â”œâ”€â”€ exceptions.py
â”‚       â”œâ”€â”€ retry.py
â”‚       â”œâ”€â”€ logging.py
â”‚       â”œâ”€â”€ progress.py
â”‚       â””â”€â”€ files.py
â”œâ”€â”€ scribe_config.json           # Example config file (generated by wizard)
â”œâ”€â”€ archive/                     # Legacy reference files
â””â”€â”€ pyproject.toml               # Package configuration
```

- `scribe config` launches a Questionary wizard, saves config to file.
- All CLI commands load config file by default; CLI flags override.
- Rich/Typer/rich-click for colorful help and error output.
- Persistent, adaptive progress/status UI using Rich Panel/Rule.
- All features scriptable and CI-friendly.

---

## ğŸ“‹ Phase 2 TODO Checklist

### 1. Implement Fast (Non-LLM) HTML-to-Markdown Mode

- [ ] Add a `--fast` or `--no-llm` CLI flag to all relevant commands (`process`, `scrape`) to enable a fast, non-LLM HTML-to-Markdown conversion mode.
    - When this flag is set, use a traditional HTML-to-Markdown package (e.g., `html2text`, `markdownify`) instead of LLM filtering.
    - Typical throughput: **50-200 docs/minute** (depending on site and hardware).
    - Update the README to document this mode, including usage examples and performance expectations.
    - Clearly distinguish between LLM and fast modes in CLI help and documentation.

---

### 2. Interactive Config Wizard

- [ ] Add `scribe config` (or `scribe wizard`) CLI command using [Questionary](https://github.com/tmbo/questionary)
    - Prompts for: **output directory** (where to save processed Markdown), model, timeout, wait, prompt, and other key options
    - **Tip:** Wizard prompt and CLI help should recommend using a separate folder for each docs set (language, project, or version)
    - Saves selections to a config file (e.g., `scribe_config.json` or `scribe.toml`)
- [ ] Ensure all CLI commands load defaults from config file if present
- [ ] Allow CLI flags to override config file values, including `--output-dir`
- [ ] Document config file format and usage in README, with examples showing different output folders for different docs sets

---

### 2. CLI & Help Output Modernization

- [ ] Integrate [rich-click](https://github.com/ewels/rich-click) or [Typer](https://typer.tiangolo.com/) for colorful, readable `--help` and error messages
- [ ] Refactor CLI help strings for clarity, conciseness, and style
- [ ] Ensure all commands and options are discoverable and well-documented

---

### 3. Progress Bar & Status UI Improvements

- [ ] Refactor to use a single persistent [Rich Progress](https://rich.readthedocs.io/en/stable/progress.html) instance for the entire run
- [ ] Review scrollscribe.py to see how we accomplished this previously. I think we did.
- [ ] Use `progress.console.log()` for all status/info messages during progress (avoid breaking the bar)
- [ ] Replace static separator lines with [Rich Panel](https://rich.readthedocs.io/en/stable/panel.html) or [Rule](https://rich.readthedocs.io/en/stable/rule.html) for adaptive, attractive section headers
- Create a custom [Rich Progress or tdqm](https://rich.readthedocs.io/en/stable/progress.html) bar with a custom theme and style see what we did previously.
- [ ] Ensure filtering and progress status remain visible and consistent throughout the run
- [ ] Test UI in various terminal sizes and platforms for robustness

---

### 4. Testing & Validation

- [ ] Test interactive wizard and config file workflow (beginner and advanced flows)
- [ ] Test CLI-only usage (no Questionary dependency required for headless/CI)
- [ ] Validate progress bar and status UI under heavy logging and edge cases
- [ ] Solicit feedback from users on UX improvements

---

## ğŸ† Success Criteria

- Users can configure ScrollScribe interactively or via CLI/config file, with no loss of scriptability
- CLI help and error output is visually appealing and easy to navigate
- Progress bar and status UI are persistent, adaptive, and never break due to logging or terminal size
- All improvements are documented and tested

---

## ğŸ’¡ Implementation Notes

- Use Questionary only in the config wizard; all other commands should work without it
- Prefer Richâ€™s adaptive UI components over static lines for cross-platform compatibility
- Consider backward compatibility for existing users/scripts
- Keep dependencies minimal and well-documented

---

## ğŸ“š References

- [Questionary Docs](https://github.com/tmbo/questionary)
- [Rich Progress](https://rich.readthedocs.io/en/stable/progress.html)
- [Rich Panel & Rule](https://rich.readthedocs.io/en/stable/panel.html)
- [rich-click](https://github.com/ewels/rich-click)
- [Typer](https://typer.tiangolo.com/)

---

## ğŸ Next Steps

1. Start with the interactive config wizard and config file logic.
2. Modernize CLI help and error output.
3. Refactor progress/status UI for persistence and polish.
4. Test, validate, and document all changes.

---
